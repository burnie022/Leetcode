"""
Given an integer array nums, return the number of triplets chosen from the array that can make triangles if we take them as side lengths of a triangle.



Example 1:

Input: nums = [2,2,3,4]
Output: 3
Explanation: Valid combinations are:
2,3,4 (using the first 2)
2,3,4 (using the second 2)
2,2,3
Example 2:

Input: nums = [4,2,3,4]
Output: 4


Constraints:

1 <= nums.length <= 1000
0 <= nums[i] <= 1000
"""
from typing import List
from bisect import bisect_left


class Solution:
    def triangleNumber(self, nums: List[int]) -> int:
        if len(nums) < 3:
            return 0
        nums = sorted(nums)
        total = 0

        for i in range(len(nums) - 1):
            for j in range(i+1, len(nums)):
                s = nums[i] + nums[j]
                k = bisect_left(nums, s) - (j+1)
                if k > 0:
                    total += k

        return total


if __name__ == "__main__":
    obj = Solution()
    tests = [
        [2, 2, 3, 4],
        [4, 2, 3, 4],
        [2, 2, 3, 4, 3],
        [101, 98, 55, 941, 75, 513, 542, 817, 98, 324, 849, 385, 837, 629, 694, 681, 260, 872, 920, 636, 12, 865, 760,
         866, 955, 44, 447, 217, 103, 308, 608, 754, 787, 883, 872, 119, 8, 2, 581, 488, 518, 939, 389, 647, 703, 332,
         403, 153, 56, 103, 77, 345, 686, 900, 406, 620, 465, 793, 926, 786, 375, 938, 293, 690, 320, 685, 232, 38, 519,
         131, 319, 133, 130, 525, 740, 230, 18, 6, 370, 896, 286, 192, 567, 680, 501, 364, 254, 521, 527, 892, 985, 317,
         591, 406, 631, 734, 889, 353, 680, 723, 10, 451, 997, 331, 933, 798, 432, 299, 660, 115, 491, 436, 763, 894,
         157, 813, 117, 797, 588, 691, 793, 505, 244, 146, 537, 551, 357, 568, 841, 36, 803, 998, 781, 8, 650, 499, 438,
         387, 57, 697, 302, 578, 114, 733, 116, 327, 6, 230, 634, 891, 707, 213, 179, 281, 715, 939, 346, 679, 13, 996,
         676, 181, 705, 54, 47, 882, 493, 250, 174, 644, 257, 123, 12, 561, 795, 414, 217, 634, 667, 187, 897, 544, 784,
         465, 847, 955, 574, 396, 866, 230, 528, 963, 960, 942, 748, 624, 72, 350, 697, 743, 739, 832, 978, 421, 274,
         30, 782, 824, 65, 747, 571, 859, 371, 481, 451, 2, 529, 987, 21, 190, 78, 450, 383, 857, 585, 147, 972, 773,
         499, 497, 912, 212, 968, 339, 879, 140, 907, 477, 626, 935, 768, 647, 895, 269, 161, 420, 453, 863, 422, 708,
         521, 552, 487, 234, 174, 499, 143, 206, 812, 613, 368, 765, 88, 155, 552, 903, 880, 693, 418, 319, 856, 185,
         655, 110, 461, 854, 317, 190, 169, 1000, 364, 597, 414, 404, 639, 319, 784, 614, 59, 618, 92, 860, 903, 345,
         505, 927, 17, 419, 30, 634, 127, 176, 317, 795, 705, 830, 304, 414, 175, 797, 881, 558, 113, 425, 461, 337,
         758, 249, 385, 467, 516, 237, 883, 683, 377, 18, 505, 677, 370, 35, 164, 95, 334, 412, 639, 509, 902, 737, 913,
         113, 579, 207, 567, 545, 283, 637, 293, 530, 450, 703, 158, 313, 85, 448, 788, 370, 566, 962, 137, 576, 78,
         950, 958, 879, 163, 445, 289, 968, 672, 445, 666, 958, 18, 672, 608, 321, 167, 58, 943, 687, 444, 910, 326,
         687, 242, 728, 451, 337, 264, 388, 881, 125, 4, 959, 451, 153, 744, 506, 258, 359, 863, 388, 558, 64, 804, 453,
         665, 52, 146, 504, 967, 960, 899, 251, 942, 110, 547, 32, 473, 268, 357, 770, 116, 46, 684, 373, 192, 205, 578,
         839, 484, 6, 820, 489, 330, 877, 203, 426, 522, 984, 266, 715, 85, 90, 526, 213, 604, 143, 907, 888, 490, 833,
         644, 154, 956, 690, 563, 726, 960, 768, 476, 621, 322, 212, 544, 456, 34, 105, 692, 745, 175, 452, 319, 996,
         504, 619, 556, 139, 314, 837, 810, 881, 446, 704, 25, 16, 624, 946, 704, 662, 424, 308, 875, 677, 858, 158,
         369, 541, 529, 222, 921, 9, 737, 252, 891, 188, 73, 239, 109, 312, 36, 975, 562, 992, 99, 207, 656, 129, 281,
         328, 783, 522, 198, 467, 609, 454, 219, 133, 485, 728, 594, 918, 447, 860, 868, 33, 396, 333, 3, 444, 839, 833,
         649, 295, 518, 496, 973, 243, 964, 686, 171, 935, 575, 746, 360, 94, 803, 586, 50, 507, 182, 679, 952, 213,
         507, 55, 490, 336, 478, 745, 696, 998, 19, 916, 944, 153, 864, 851, 991, 449, 486, 579, 562, 459, 392, 368,
         171, 407, 701, 259, 103, 373, 709, 539, 93, 918, 933, 365, 537, 532, 481, 345, 264, 794, 494, 174, 507, 107,
         33, 679, 579, 208, 232, 260, 172, 877, 924, 188, 909, 931, 699, 696, 799, 528, 254, 308, 360, 701, 302, 789,
         562, 998, 113, 279, 89, 126, 19, 719, 402, 990, 533, 15, 335, 48, 140, 745, 289, 809, 449, 444, 700, 174, 339,
         74, 371, 222, 91, 187, 221, 758, 972, 92, 277, 543, 45, 905, 331, 783, 694, 4, 715, 773, 637, 601, 810, 900,
         116, 504, 358, 234, 85, 176, 139, 344, 723, 735, 866, 246, 883, 331, 190, 243, 901, 32, 635, 233, 157, 823,
         927, 952, 630, 727, 545, 186, 268, 193, 785, 707, 666, 802, 289, 1000, 826, 89, 854, 560, 707, 495, 936, 129,
         41, 760, 505, 734, 964, 492, 599, 180, 100, 119, 151, 643, 530, 651, 70, 158, 102, 234, 192, 709, 70, 731, 846,
         505, 282, 359, 200, 966, 475, 754, 843, 757, 624, 931, 271, 90, 579, 350, 837, 301, 655, 779, 826, 237, 599,
         808, 845, 648, 481, 145, 417, 430, 266, 291, 253, 283, 671, 413, 305, 948, 463, 280, 752, 206, 885, 471, 784,
         240, 260, 471, 930, 604, 740, 914, 0, 462, 161, 23, 279, 331, 317, 868, 274, 948, 487, 973, 9, 944, 497, 809,
         397, 332, 988, 714, 875, 135, 617, 17, 636, 790, 348, 701, 308, 973, 166, 448, 773, 270, 664, 705, 435, 570,
         217, 290, 347, 7, 240, 639, 36, 991, 875, 214, 6, 451, 211, 720, 692, 85, 59, 924, 530, 877, 527, 547, 725,
         903, 698, 588, 821, 252, 774, 104, 902, 690, 869, 655, 64, 847, 995, 15, 385, 812, 801, 817, 11, 863, 81, 95,
         901, 247, 883, 73, 582, 161, 69, 947, 27, 261, 198, 499, 957, 728, 327, 522, 425, 451, 250, 204, 499, 94, 339,
         162, 803, 938, 255, 755, 171, 85, 32, 963, 390, 488, 119, 309, 814, 420, 227, 939, 464, 509, 905, 59, 74, 668,
         765, 314, 25, 618, 454, 476, 492, 994, 331, 315, 391, 207, 988, 78, 262, 42, 48, 556, 691, 994, 667, 318, 846,
         613, 790, 383, 99, 147, 343, 733, 709, 162, 447, 962, 273, 874, 732, 512, 172, 853, 819, 719, 438, 639, 828,
         572, 437, 466, 741, 58, 250, 159, 255, 313, 779, 211, 121, 843, 319, 238, 870, 676, 671, 242, 462, 425, 641,
         444, 704, 846, 655, 451, 41, 729, 206, 7],
        [471, 484, 284, 898, 203, 345, 34, 613, 127, 3, 790, 147, 296, 836, 550, 108, 155, 41, 619, 967, 118, 869, 442,
         396, 910, 198, 287, 301, 669, 196, 211, 421, 349, 314, 595, 242, 9, 800, 527, 336, 462, 62, 830, 707, 808, 533,
         16, 833, 445, 497, 559, 121, 124, 121, 284, 170, 268, 573, 906, 41, 158, 800, 173, 545, 751, 504, 17, 439, 674,
         201, 565, 138, 566, 981, 193, 880, 47, 727, 519, 130, 952, 754, 443, 521, 721, 223, 839, 953, 746, 632, 60,
         298, 288, 175, 194, 653, 92, 311, 976, 275, 796, 55, 697, 260, 606, 980, 802, 65, 891, 202, 694, 782, 359, 474,
         14, 601, 95, 270, 153, 250, 732, 214, 832, 803, 312, 922, 484, 813, 664, 856, 966, 112, 651, 929, 532, 612,
         662, 59, 901, 860, 684, 375, 58, 706, 915, 899, 778, 851, 963, 66, 385, 593, 526, 957, 489, 501, 969, 670, 94,
         961, 410, 653, 379, 865, 870, 42, 582, 262, 155, 488, 564, 585, 7, 49, 543, 177, 159, 167, 190, 246, 421, 162,
         480, 554, 611, 948, 323, 118, 380, 570, 383, 609, 218, 217, 625, 591, 619, 556, 174, 796, 673, 45, 650, 868, 4,
         822, 162, 657, 394, 224, 792, 557, 193, 213, 991, 844, 152, 138, 681, 634, 155, 469, 797, 88, 455, 933, 296,
         278, 818, 96, 666, 744, 88, 322, 296, 260, 936, 507, 573, 153, 63, 960, 678, 502, 51, 344, 841, 810, 32, 214,
         446, 348, 854, 664, 270, 28, 716, 527, 937, 394, 537, 279, 515, 488, 913, 265, 897, 359, 815, 387, 237, 107,
         181, 595, 453, 468, 419, 821, 639, 677, 476, 590, 792, 597, 994, 220, 197, 332, 963, 843, 370, 756, 320, 575,
         760, 198, 566, 708, 755, 115, 322, 983, 355, 921, 396, 980, 877, 843, 382, 69, 497, 127, 403, 433, 316, 581,
         578, 628, 347, 46, 252, 567, 716, 499, 31, 479, 634, 692, 144, 470, 262, 911, 496, 435, 109, 869, 358, 824,
         779, 640, 564, 958, 54, 281, 210, 76, 118, 597, 913, 751, 759, 447, 637, 245, 741, 211, 338, 582, 975, 301,
         713, 668, 926, 860, 745, 352, 323, 624, 477, 99, 757, 897, 453, 608, 714, 253, 343, 90, 974, 217, 780, 762,
         924, 75, 231, 803, 718, 365, 845, 858, 519, 201, 418, 746, 392, 915, 6, 40, 352, 428, 220, 834, 637, 552, 601,
         608, 425, 857, 259, 337, 362, 64, 440, 779, 455, 78, 764, 163, 203, 123, 252, 352, 879, 859, 987, 141, 484,
         800, 377, 140, 941, 345, 626, 107, 994, 582, 629, 591, 662, 136, 86, 252, 541, 424, 11, 395, 733, 456, 919,
         835, 657, 57, 504, 934, 176, 677, 650, 240, 282, 547, 280, 518, 813, 86, 839, 475, 855, 926, 346, 293, 875,
         920, 491, 574, 959, 897, 326, 258, 120, 822, 685, 945, 411, 413, 934, 773, 360, 643, 931, 760, 499, 446, 742,
         646, 171, 212, 623, 435, 729, 400, 223, 299, 472, 785, 434, 498, 774, 399, 603, 469, 955, 113, 413, 959, 505,
         613, 559, 715, 709, 619, 423, 369, 245, 781, 303, 437, 20, 341, 476, 342, 640, 714, 571, 882, 397, 996, 421,
         581, 573, 473, 800, 582, 355, 383, 267, 817, 315, 976, 286, 474, 710, 473, 907, 780, 193, 195, 493, 420, 308,
         128, 791, 175, 51, 626, 728, 418, 661, 849, 981, 551, 968, 817, 822, 814, 808, 249, 49, 683, 324, 577, 30, 547,
         973, 150, 840, 228, 984, 19, 346, 914, 626, 687, 253, 188, 472, 516, 91, 423, 459, 949, 284, 315, 74, 36, 482,
         661, 843, 219, 408, 395, 42, 874, 459, 775, 845, 875, 85, 687, 820, 815, 739, 832, 621, 853, 614, 136, 94, 89,
         86, 268, 705, 877, 224, 345, 16, 221, 232, 629, 58, 445, 766, 504, 116, 632, 97, 852, 288, 321, 488, 235, 68,
         31, 918, 986, 486, 881, 978, 534, 460, 9, 14, 583, 695, 920, 549, 862, 511, 777, 761, 612, 896, 854, 61, 173,
         232, 24, 604, 968, 481, 807, 511, 858, 934, 797, 637, 122, 251, 761, 338, 794, 803, 957, 830, 41, 608, 528,
         382, 54, 884, 246, 885, 645, 992, 139, 339, 69, 262, 55, 468, 616, 450, 155, 823, 438, 635, 475, 458, 272, 131,
         957, 382, 17, 387, 691, 142, 529, 310, 17, 71, 795, 815, 350, 838, 803, 646, 2, 766, 547, 288, 418, 676, 734,
         214, 993, 186, 974, 14, 62, 315, 506, 714, 882, 189, 723, 603, 429, 606, 222, 600, 27, 978, 745, 70, 224, 775,
         955, 411, 358, 456, 47, 197, 817, 654, 146, 369, 488, 242, 538, 724, 995, 627, 591, 175, 800, 27, 504, 728,
         356, 651, 237, 932, 690, 488, 533, 425, 185, 985, 90, 38, 338, 906, 153, 600, 655, 254, 87, 304, 373, 858, 595,
         795, 199, 276, 211, 710, 258, 799, 830, 220, 723, 546, 922, 852, 219, 116, 485, 300, 614, 375, 399, 28, 349,
         122, 174, 64, 376, 290, 584, 244, 396, 762, 840, 740, 19, 403, 484, 219, 544, 26, 618, 701, 313, 537, 153, 124,
         383, 433, 87, 216, 285, 334, 960, 87, 717, 712, 472, 90, 321, 233, 700, 384, 598, 433, 255, 679, 812, 349, 259,
         100, 513, 527, 111, 607, 700, 214, 302, 596, 717, 308, 760, 607, 831, 840, 851, 569, 587, 502, 914, 501, 668,
         868, 888, 138, 31, 968, 5, 979, 414, 249, 30, 312, 234, 798, 597, 654, 922, 623, 320, 340, 642, 350, 724, 600,
         226, 242, 943, 954, 440, 154, 315, 891, 390, 344, 734, 774, 616, 832, 634, 390, 749, 382, 325, 116, 863, 475,
         522, 204, 12, 329, 726, 282, 472, 640, 764, 760, 907, 294, 71, 616, 767, 856, 776, 105, 658, 225, 861, 345,
         703, 920, 510, 653, 244, 349, 509, 932, 547, 188, 599, 371, 823, 458, 449, 190, 109, 824, 850, 730, 590, 330,
         634, 8, 71, 36, 595, 316, 694, 343, 726, 787, 717]
    ]

    for t in tests:
        print(t)
        # print(obj.triangleNumber(t), end="\n\n")

    # from random import randint
    #
    # print([randint(0, 1000) for _ in range(1000)])
