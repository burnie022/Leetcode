"""
Given n non-negative integers representing an elevation map where the width of each bar is 1, compute how much water
it can trap after raining.

Example 1:
    Input: height = [0,1,0,2,1,0,1,3,2,1,2,1]
    Output: 6
    Explanation: The above elevation map (black section) is represented by array [0,1,0,2,1,0,1,3,2,1,2,1]. In this
        case, 6 units of rain water (blue section) are being trapped.

Example 2:
    Input: height = [4,2,0,3,2,5]
    Output: 9

Constraints:
    n == height.length
    0 <= n <= 3 * 10^4
    0 <= height[i] <= 10^5
"""
from typing import List
import heapq


class Solution:
    def trap(self, height: List[int]) -> int:
        if len(height) < 3:
            return 0
        hi, tot = height[0], 0
        stack = [height[0]]

        for i in range(1, len(height)):
            if height[i] > height[i-1] and hi > height[i-1]:
                lo = min(hi, height[i])
                n = 0
                while stack[-1] < lo:
                    tot += lo - stack.pop()
                    n += 1
                if height[i] < hi:
                    for _ in range(n):
                        stack.append(height[i])
                else:
                    hi = height[i]
                stack.append(height[i])
            else:
                if height[i] > hi:
                    hi = height[i]
                stack.append(height[i])

        return tot

if __name__ == "__main__":
    obj = Solution()
    tests = [
        [0, 1, 0, 2, 1, 0, 1, 3, 2, 1, 2, 1],
        [4, 2, 0, 3, 2, 5],
        [5, 2, 3, 1, 4],
        [39, 18, 11, 36, 14, 11, 42, 24, 26, 24, 8, 41, 4, 10, 16, 31, 36, 48, 7, 40, 9, 29, 6, 29, 9, 9, 3, 37, 20, 4,
         30, 13, 5, 20, 2, 47, 5, 39, 18, 15, 11, 35, 14, 9, 44, 42, 48, 21, 32, 39, 3, 5, 23, 15, 37, 40, 5, 24, 43,
         21, 26, 5, 47, 5, 44, 40, 30, 43, 17, 5, 17, 12, 40, 36, 14, 28, 38, 8, 38, 37, 41, 1, 47, 48, 19, 29, 9, 49,
         6, 35, 50, 2, 43, 46, 39, 46, 36, 26, 29, 50, 2, 37, 23, 44, 24, 7, 15, 12, 46, 38, 2, 38, 2, 33, 9, 23, 6, 4,
         45, 42, 25, 36, 46, 15, 26, 23, 39, 16, 10, 30, 50, 4, 48, 30, 16, 1, 40, 14, 28, 21, 39, 43, 36, 22, 33, 11,
         38, 47, 13, 50, 13, 22, 50, 35, 34, 35, 8, 32, 5, 27, 37, 1, 8, 40, 28, 41, 2, 31, 29, 16, 19, 29, 18, 37, 40,
         45, 18, 15, 2, 46, 0, 17, 7, 4, 11, 11, 44, 46, 6, 3, 4, 16, 39, 47, 20, 33, 20, 41, 31, 25],
        [],
        [1],
        [1,1],
        [1,2],
        [1,2,3],
        [1,2,1],
        [2,1,2],
        [386, 1, 44, 519, 91, 871, 400, 473, 164, 64, 648, 42, 915, 70, 987, 666, 427, 80, 479, 572, 682, 214, 985, 588,
         888, 257, 506, 784, 803, 845, 562, 749, 1, 601, 845, 264, 46, 717, 671, 929, 788, 381, 980, 137, 398, 294, 442,
         544, 957, 657, 208, 863, 841, 902, 437, 970, 515, 873, 228, 868, 526, 771, 450, 967, 36, 37, 101, 110, 356,
         199, 339, 381, 345, 485, 200, 175, 759, 803, 22, 988, 211, 764, 580, 256, 479, 294, 426, 530, 653, 483, 91,
         401, 812, 192, 586, 921, 26, 31, 918, 479, 115, 933, 865, 22, 311, 454, 593, 52, 219, 209, 333, 510, 511, 185,
         412, 753, 131, 94, 650, 157, 354, 461, 45, 488, 153, 711, 378, 883, 251, 443, 122, 684, 492, 807, 391, 265,
         589, 783, 362, 244, 233, 835, 802, 473, 966, 398, 898, 633, 91, 342, 265, 908, 768, 223, 219, 111, 414, 289,
         803, 43, 609, 922, 572, 35, 52, 23, 896, 477, 389, 838, 545, 744, 298, 0, 242, 285, 190, 203, 866, 202, 783,
         425, 235, 75, 246, 505, 829, 899, 464, 638, 138, 112, 332, 635, 225, 321, 426, 45, 882, 339, 548, 865, 405,
         362, 540, 570, 702, 548, 990, 378, 857, 93, 218, 71, 366, 21, 963, 194, 952, 710, 531, 742, 779, 899, 212, 919,
         113, 512, 171, 483, 638, 417, 212, 742, 29, 984, 985, 116, 743, 779, 879, 756, 758, 374, 736, 455, 723, 797,
         64, 74, 524, 439, 320, 36, 409, 889, 621, 140, 431, 182, 794, 914, 125, 527, 379, 522, 964, 677, 194, 575, 123,
         320, 6, 369, 173, 591, 21, 341, 588, 870, 340, 882, 631, 601, 552, 625, 228, 896, 557, 557, 975, 392, 46, 564,
         180, 622, 558, 159, 578, 997, 618, 639, 667, 931, 275, 316, 460, 754, 9, 37, 109, 849, 309, 752, 115, 379, 638,
         153, 393, 913, 497, 828, 659, 845, 759, 213, 108, 995, 699, 766, 382, 454, 462, 376, 789, 313, 286, 916, 767,
         955, 638, 744, 424, 167, 960, 387, 112, 839, 593, 937, 266, 684, 632, 431, 986, 557, 322, 462, 643, 153, 222,
         524, 849, 856, 773, 886, 739, 760, 627, 372, 39, 760, 184, 133, 630, 937, 397, 44, 924, 806, 520, 728, 566,
         115, 655, 389, 247, 77, 835, 22, 447, 680, 745, 740, 919, 204, 426, 282, 128, 111, 499, 743, 557, 922, 326,
         839, 320, 874, 194, 581, 603, 73, 48, 782, 791, 569, 599, 489, 396, 934, 963, 557, 918, 741, 571, 608, 21, 938,
         192, 343, 200, 119, 749, 317, 0, 136, 388, 775, 187, 781, 152, 16, 962, 52, 694, 298, 584, 198, 422, 578, 528,
         305, 410, 543, 946, 619, 293, 991, 445, 36, 716, 753, 51, 746, 930, 654, 22, 600, 647, 977, 826, 500, 428, 973,
         591, 394, 68, 360, 548, 476, 902, 129, 682, 125, 685, 78, 118, 20, 20, 213, 182, 919, 393, 71, 747, 251, 927,
         23, 176, 69, 380, 732, 556, 436, 300, 310, 650, 230, 533, 902, 754, 144, 420, 245, 897, 78, 972, 895, 902, 921,
         193, 725, 543, 705, 185, 613, 329, 953, 877, 356, 773, 668, 198, 369, 124, 520, 554, 153, 155, 317, 288, 807,
         535, 703, 583, 897, 799, 945, 81, 911, 447, 882, 300, 330, 780, 61, 486, 198, 790, 620, 31, 265, 202, 366, 890,
         417, 369, 36, 840, 925, 431, 655, 533, 625, 550, 77, 852, 965, 259, 194, 586, 276, 854, 730, 695, 650, 733,
         385, 863, 642, 197, 45, 251, 131, 443, 668, 202, 558, 267, 313, 48, 950, 220, 425, 247, 99, 979, 749, 920, 36,
         297, 528, 714, 340, 102, 999, 277, 80, 668, 856, 667, 461, 847, 651, 665, 78, 67, 260, 715, 636, 930, 226, 703,
         286, 696, 595, 370, 392, 172, 467, 658, 101, 481, 368, 31, 961, 539, 251, 822, 736, 939, 698, 144, 597, 769,
         155, 956, 757, 448, 87, 981, 121, 67, 948, 149, 992, 586, 654, 981, 927, 190, 827, 487, 669, 315, 699, 48, 897,
         756, 761, 278, 520, 84, 365, 439, 177, 921, 425, 94, 468, 756, 871, 205, 703, 942, 571, 918, 936, 554, 681,
         347, 963, 27, 531, 561, 759, 95, 970, 769, 820, 183, 350, 82, 801, 656, 523, 758, 484, 532, 19, 494, 343, 294,
         718, 523, 90, 863, 909, 945, 140, 480, 248, 769, 114, 368, 108, 311, 370, 219, 787, 307, 659, 648, 943, 989,
         987, 649, 578, 480, 405, 235, 0, 346, 277, 285, 358, 559, 391, 617, 230, 103, 948, 62, 833, 378, 760, 784, 513,
         722, 96, 245, 539, 365, 716, 680, 361, 368, 234, 617, 706, 633, 554, 500, 23, 917, 3, 413, 266, 55, 102, 502,
         424, 292, 580, 182, 177, 399, 256, 983, 164, 957, 966, 860, 298, 664, 486, 178, 680, 128, 853, 853, 453, 550,
         678, 192, 353, 855, 478, 867, 900, 695, 84, 445, 267, 709, 735, 996, 197, 448, 619, 160, 295, 476, 573, 219,
         847, 561, 641, 162, 134, 325, 207, 819, 41, 599, 655, 415, 309, 466, 815, 208, 796, 739, 441, 169, 762, 658,
         228, 652, 237, 756, 664, 587, 850, 930, 459, 107, 89, 233, 9, 462, 36, 456, 24, 996, 665, 759, 806, 383, 117,
         321, 669, 613, 327, 982, 973, 420, 463, 84, 511, 163, 518, 418, 162, 869, 486, 725, 784, 374, 213, 767, 626,
         638, 930, 912, 47, 459, 560, 83, 714, 201, 622, 482, 321, 145, 361, 293, 798, 900, 780, 397, 163, 710, 236,
         214, 768, 351, 914, 708, 628, 713, 32, 991, 92, 55, 87, 699, 113, 61, 847, 369, 107, 9, 50, 268, 208, 474, 609,
         296, 260, 365, 551, 224, 503, 248, 339, 99, 751, 22, 500, 300, 604, 678, 231, 701, 625, 977, 323, 109, 626,
         141, 775, 882, 103, 492, 129, 149, 393, 468, 503, 630, 831, 958, 714, 698, 734, 314, 623, 16, 897, 219, 571,
         683, 606, 831, 494, 86, 203, 983, 548, 207, 633, 457, 736, 848, 752, 804, 811, 256, 878, 903, 530, 494, 7, 119,
         572, 450, 109, 188, 231, 461, 193, 164, 310, 378, 435, 436, 724, 452, 164, 50, 2, 730, 310, 141, 280, 286, 436,
         838, 125, 896, 742, 189, 128, 365, 72, 94, 243, 505, 601, 895, 109, 813, 772, 995, 280, 382, 559, 965, 4, 554,
         588, 482, 787, 311, 275, 120, 597, 92, 881, 353, 187, 944, 438, 820, 334, 743, 77, 977, 825, 710, 164, 789,
         345, 324, 663, 573, 663, 670, 814, 331, 512, 758, 334, 30, 349, 783, 863, 230, 638, 200, 112, 895, 605, 722,
         99, 726, 683, 102, 862, 349, 819, 823, 288, 489, 4, 823, 90, 379, 328, 435, 82, 286, 505, 398, 987, 313, 9,
         341, 666, 967, 156, 755, 280, 828, 861, 798, 777, 606, 939, 417, 962, 191, 954, 96, 583, 634, 774, 512, 52,
         843, 80, 587, 861, 98, 796, 123, 924, 241, 446, 513, 63, 199, 716, 340, 957, 818, 272, 90, 113, 503, 195, 5,
         36, 992, 804, 191, 940, 688, 889, 271, 47, 829, 175, 580, 29, 702, 792, 13, 620, 619, 377, 786, 438, 8, 943,
         380, 10, 359, 834, 969, 954, 526, 483, 110, 933, 405, 577, 747, 742, 367, 96, 733, 215, 24, 408, 565, 85, 899,
         23, 40, 751, 947, 126, 576, 316, 230, 11, 738, 788, 384, 379, 322, 473, 64, 556, 592, 799, 799, 880, 6, 645,
         815, 219, 572, 687, 519, 613, 691, 703, 661, 670, 437, 83, 746, 751, 725, 425, 3, 880, 86, 99, 202, 849, 94,
         748, 934, 380, 794, 175, 788, 802, 690, 501, 693, 245, 998, 45, 373, 79, 541, 362, 188, 110, 273, 26, 704, 97,
         519, 960, 629, 458, 611, 938, 812, 421, 181, 803, 264, 776, 17, 569, 384, 831, 581, 298, 677, 595, 109, 962,
         192, 711, 34, 787, 885, 710, 671, 512, 326, 688, 31, 845, 44, 10, 352, 581, 177, 529, 549, 378, 344, 205, 930,
         247, 526, 386, 368, 881, 978, 627, 627, 365, 951, 336, 601, 888, 899, 972, 720, 86, 762, 404, 325, 140, 318,
         999, 203, 753, 647, 975, 141, 751, 91, 491, 206, 281, 626, 583, 204, 904, 756, 580, 321, 755, 141, 539, 825,
         383, 667, 959, 400, 932, 900, 705, 70, 274, 394, 649, 215, 153, 114, 674, 952, 162, 536, 190, 512, 725, 963,
         148, 314, 825, 816, 729, 774, 885, 970, 339, 951, 957, 604, 730, 346, 533, 922, 611, 230, 169, 240, 143, 126,
         258, 579, 672, 229, 921, 58, 408, 579, 90, 99, 226, 309, 264, 942, 797, 139, 469, 629, 752, 804, 964, 361, 411,
         274, 700, 617, 790, 73, 381, 95, 40, 59, 470, 959, 981, 113, 582, 781, 516, 120, 425, 508, 508, 677, 605, 9,
         225, 928, 253, 592, 966, 42, 588, 823, 763, 651, 675, 364, 243, 192, 769, 879, 172, 222, 545, 180, 854, 795,
         392, 608, 983, 573, 951, 146, 445, 668, 949, 194, 839, 434, 802, 707, 147, 831, 235, 195, 928, 716, 305, 406,
         199, 140, 419, 658, 529, 247, 490, 58, 198, 872, 374, 33, 88, 665, 894, 301, 290, 181, 152, 981, 43, 0, 251,
         472, 551, 286, 791, 131, 459, 128, 191, 506, 956, 787, 779, 73, 551, 989, 795, 595, 799, 395, 636, 271, 916,
         657, 518, 133, 520, 906, 433, 362, 750, 384, 501, 453, 500, 829, 740, 795, 728, 340, 326, 87, 84, 188, 74, 237,
         497, 480, 623, 664, 711, 789, 701, 412, 54, 964, 994, 612, 513, 317, 716, 851, 404, 600, 877, 185, 915, 178,
         822, 902, 760, 419, 56, 857, 978, 212, 582, 705, 841, 123, 679, 128, 722, 44, 806, 673, 415, 289, 109, 452,
         301, 24, 271, 2, 73, 699, 7, 79, 484, 882, 803, 134, 950, 723, 945, 713, 988, 878, 52, 666, 866, 536, 942, 836,
         55, 367, 717, 556, 629, 119, 715, 57, 409, 205, 647, 824, 428, 299, 804, 248, 25, 813, 986, 363, 580, 995, 169,
         544, 951, 803, 952, 829, 997, 91, 397, 40, 625, 891, 652, 126, 183, 880, 951, 643, 144, 933, 851, 117, 42, 922,
         303, 242, 188, 664, 567, 619, 807, 804, 370, 706, 849, 920, 290, 838, 364, 370, 296, 603, 572, 303, 507, 107,
         943, 71, 624, 95, 28, 556, 104, 919, 490, 604, 830, 387, 143, 269, 676, 459, 413, 720, 961, 530, 214, 874, 231,
         108, 151, 82, 92, 86, 60, 603, 337, 143, 325, 576, 626, 251, 442, 699, 488, 548, 832, 787, 398, 281, 229, 619,
         880, 930, 346, 540, 643, 745, 444, 838, 802, 12, 728, 342, 137, 854, 635, 867, 508, 442, 225, 610, 771, 766,
         360, 764, 440, 373, 116, 18, 890, 805, 819, 569, 243, 316, 386, 735, 798, 875, 207, 998, 682, 977, 363, 168,
         512, 611, 328, 245, 974, 958, 432, 231, 672, 116, 256, 277, 542, 996, 295, 468, 724, 539, 196, 759, 376, 512,
         739, 612, 562, 735, 929, 166, 62, 493, 966, 358, 33, 429, 851, 517, 673, 55, 372, 42, 643, 687, 787, 718, 376,
         520, 669, 705, 504, 588, 138, 280, 945, 943, 760, 330, 63, 290, 486, 689, 10, 125, 15, 864, 913, 648, 147, 725,
         205, 875, 327, 970, 381, 532, 975, 479, 12, 105, 705, 648, 427, 531, 342, 126, 85, 492, 18, 101, 709, 651, 660,
         107, 426, 42, 180, 640, 273, 863, 318, 481, 675, 659, 43, 549, 686, 26, 199, 461, 923, 332, 109, 828, 971, 296,
         461, 149, 386, 610, 507, 936, 519, 771, 692, 880, 827, 80, 789, 793, 470, 745, 469, 795, 37, 313, 598, 464,
         701, 431, 797, 295, 18, 135, 977, 366, 681, 984, 738, 604, 246, 328, 207, 478, 122, 824, 106, 734, 502, 350,
         898, 933, 268, 830, 635, 391, 928, 317, 876, 891, 863, 370, 137, 753, 260, 297, 10, 147, 918, 262, 589, 898,
         867, 433, 160, 513, 669, 998, 757, 563, 144, 470, 165, 132, 156, 269, 420, 917, 247, 251, 694, 855, 652, 987,
         257, 20, 964, 874, 737, 724, 668, 302, 906, 865, 953, 971, 677, 897, 471, 799, 694, 307, 478, 559, 582, 681,
         932, 59, 165, 542, 298, 731, 911, 282, 664, 90, 914, 798, 384, 432, 662, 525, 500, 361, 217, 936, 71, 662, 285,
         6, 0, 404, 229, 391, 391, 121, 216, 898, 708, 115, 255, 606, 643, 840, 339, 333, 813, 449, 974, 677, 908, 25,
         274, 615, 1, 605, 925, 34, 95, 906, 312, 863, 624, 340, 553, 257, 686, 181, 985, 809, 511, 763, 541, 484, 606,
         148, 13, 812, 742, 326, 540, 841, 542, 358, 113, 311, 539, 314, 478, 546, 636, 88, 834, 785, 446, 376, 552,
         565, 137, 57, 360, 362, 634, 848, 184, 761, 328, 914, 894, 966, 97, 57, 385, 929, 859, 726, 384, 929, 762, 640,
         95, 153, 453, 175, 691, 356, 85, 143, 467, 187, 643, 892, 699, 310, 897, 872, 400, 472, 43, 968, 915, 688, 896,
         453, 224, 200, 6, 632, 949, 847, 621, 276, 959, 285, 898, 482, 769, 600, 74, 794, 223, 918, 223, 248, 720, 471,
         336, 487, 293, 988, 19, 923, 692, 837, 457, 112, 925, 715, 782, 965, 401, 535, 540, 84, 248, 582, 441, 194,
         290, 801, 475, 685, 960, 432, 408, 896, 945, 417, 649, 234, 288, 41, 957, 691, 838, 126, 915, 40, 993, 588, 9,
         264, 239, 538, 225, 669, 432, 508, 785, 453, 368, 266, 138, 936, 227, 684, 356, 189, 298, 319, 878, 985, 684,
         691, 724, 453, 43, 398, 314, 880, 411, 121, 618, 568, 32, 628, 810, 460, 317, 754, 58, 981, 512, 668, 701, 65,
         936, 295, 3, 337, 459, 120, 632, 357, 543, 103, 580, 202, 31, 102, 629, 579, 52, 417, 935, 52, 125, 853, 322,
         68, 325, 819, 86, 848, 881, 590, 89, 892, 51, 66, 25, 613, 819, 773, 48, 231, 405, 918, 785, 426, 709, 101,
         977, 209, 790, 612, 800, 601, 308, 573, 122, 858, 722, 737, 411, 245, 138, 997, 896, 492, 451, 275, 452, 99,
         596, 103, 459, 558, 806, 758, 173, 768, 573, 932, 92, 398, 37, 44, 938, 672, 985, 297, 147, 273, 94, 525, 757,
         748, 505, 907, 784, 300, 260, 319, 697, 278, 924, 763, 368, 200, 885, 568, 463, 493, 974, 630, 744, 110, 125,
         247, 878, 879, 754, 526, 633, 502, 429, 928, 311, 648, 321, 413, 613, 200, 869, 818, 5, 396, 293, 643, 318,
         402, 334, 454, 170, 673, 280, 730, 542, 13, 620, 560, 97, 159, 664, 644, 917, 32, 542, 549, 592, 428, 231, 309,
         650, 266, 795, 565, 217, 174, 307, 958, 237, 1, 592, 567, 217, 97, 888, 386, 528, 695, 726, 405, 286, 85, 31,
         560, 322, 736, 538, 588, 47, 703, 159, 814, 843, 676, 23, 328, 370, 407, 918, 817, 744, 484, 267, 369, 351, 81,
         643, 315, 315, 378, 875, 976, 390, 946, 15, 166, 158, 862, 55, 264, 407, 29, 16, 262, 965, 2, 782, 630, 299,
         388, 424, 390, 824, 510, 833, 898, 65, 456, 820, 141, 349, 196, 465, 911, 76, 697, 680, 318, 415, 634, 282,
         309, 563, 837, 263, 717, 566, 498, 731, 772, 408, 866, 219, 64, 863, 570, 87, 302, 662, 741, 904, 219, 716,
         448, 917, 738, 848, 467, 848, 783, 630, 826, 907, 526, 80, 589, 519, 512, 894, 774, 658, 462, 9, 310, 701, 348,
         793, 905, 798, 725, 159, 165, 0, 831, 674, 658, 44, 819, 207, 182, 343, 117, 540, 333, 614, 439, 744, 754, 266,
         378, 199, 69, 730, 22, 543, 984, 773, 360, 758, 841, 442, 290, 957, 978, 141, 234, 657, 508, 365, 200, 354,
         693, 327, 384, 328, 29, 205, 125, 906, 744, 128, 115, 91, 2, 306, 779, 64, 563, 65, 490, 313, 605, 286, 404,
         826, 345, 746, 671, 238, 907, 255, 95, 474, 291, 36, 409, 573, 394, 914, 851, 75, 965, 873, 80, 574, 571, 904,
         206, 63, 598, 850, 769, 464, 895, 682, 736, 959, 409, 230, 928, 842, 981, 887, 160, 897, 66, 474, 570, 724,
         800, 873, 361, 740, 240, 123, 111, 639, 102, 162, 998, 237, 555, 300, 696, 818, 811, 293, 498, 600, 310, 997,
         950, 103, 370, 833, 922, 89, 725, 522, 34, 810, 754, 361, 122, 225, 808, 258, 414, 159, 842, 636, 482, 773,
         786, 307, 12, 247, 447, 940, 762, 908, 846, 65, 491, 138, 750, 745, 804, 536, 130, 161, 395, 469, 396, 364,
         882, 707, 564, 844, 978, 969, 90, 316, 481, 939, 418, 895, 118, 775, 729, 0, 51, 990, 874, 317, 812, 234, 126,
         121, 451, 439, 936, 66, 963, 915, 249, 635, 762, 722, 51, 774, 522, 825, 439, 889, 40, 284, 678, 559, 486, 734,
         520, 932, 495, 685, 928, 744, 886, 488, 805, 933, 609, 73, 167, 471, 807, 659, 296, 262, 206, 77, 895, 172,
         923, 436, 330, 341, 768, 89, 576, 835, 414, 936, 14, 137, 795, 620, 185, 682, 472, 802, 978, 478, 514, 144,
         833, 576, 232, 177, 233, 495, 537, 914, 380, 992, 34, 197, 244, 341, 247, 324, 406, 860, 988, 115, 311, 746,
         219, 976, 621, 559, 768, 786, 505, 402, 573, 527, 490, 241, 850, 391, 443, 895, 183, 516, 215, 12, 461, 789,
         352, 860, 141, 419, 243, 441, 48, 786, 935, 501, 735, 805, 225, 685, 868, 450, 43, 258, 317, 978, 198, 626,
         687, 915, 129, 797, 924, 261, 230, 159, 246, 923, 713, 29, 4, 51, 131, 358, 863, 207, 370, 652, 572, 700, 796,
         457, 811, 860, 8, 673, 454, 165, 65, 935, 76, 614, 546, 753, 283, 615, 982, 830, 346, 148, 159, 647, 66, 93,
         504, 241, 161, 463, 967, 287, 75, 91, 478, 368, 176, 692, 565, 249, 618, 513, 135, 104, 677, 871, 776, 538, 48,
         94, 122, 475, 30, 67, 500, 35, 464, 622, 138, 109, 863, 870, 936, 721, 258, 801, 673, 798, 120, 617, 864, 519,
         956, 776, 340, 622, 151, 69, 683, 438, 419, 574, 342, 39, 43, 36, 746, 6, 846, 79, 823, 30, 823, 845, 24, 969,
         40, 446, 398, 56, 480, 616, 727, 242, 37, 30, 625, 749, 341, 642, 357, 854, 975, 64, 704, 448, 107, 804, 395,
         119, 607, 304, 726, 196, 580, 888, 953, 575, 770, 608, 639, 955, 896, 561, 939, 669, 393, 923, 98, 832, 948,
         336, 956, 194, 419, 434, 850, 813, 95, 653, 24, 822, 806, 854, 479, 456, 194, 638, 954, 781, 898, 848, 838,
         588, 15, 155, 539, 186, 214, 447, 16, 370, 567, 590, 903, 140, 217, 842, 685, 308, 496, 101, 294, 785, 208,
         757, 530, 152, 79, 661, 221, 800, 300, 665, 618, 378, 174, 92, 733, 49, 71, 293, 917, 72, 62, 291, 23, 294,
         887, 419, 669, 492, 419, 985, 324, 798, 474, 425, 517, 346, 671, 251, 204, 206, 264, 243, 801, 345, 90, 777,
         645, 482, 162, 72, 172, 183, 222, 28, 816, 795, 865, 476, 942, 490, 834, 924, 674, 288, 279, 164, 978, 536,
         512, 497, 276, 110, 650, 681, 415, 386, 404, 690, 571, 155, 690, 748, 238, 364, 476, 617, 966, 643, 219, 731,
         614, 199, 650, 629, 744, 727, 700, 180, 99, 328, 930, 816, 129, 107, 687, 490, 560, 954, 391, 98, 296, 187,
         360, 461, 663, 109, 827, 382, 344, 104, 575, 206, 736, 842, 688, 684, 318, 342, 151, 12, 12, 694, 181, 676,
         370, 241, 810, 131, 833, 31, 180, 434, 894, 984, 595, 958, 90, 697, 317, 528, 712, 711, 199, 554, 161, 65, 882,
         949, 266, 949, 721, 943, 866, 138, 123, 798, 256, 151, 53, 718, 849, 757, 718, 288, 246, 694, 928, 40, 328,
         394, 622, 595, 119, 665, 50, 270, 36, 137, 830, 590, 192, 593, 171, 489, 940, 372, 218, 217, 393, 670, 473,
         379, 629, 790, 782, 75, 917, 317, 33, 505, 93, 106, 656, 136, 281, 139, 527, 261, 936, 502, 917, 972, 23, 208,
         286, 603, 774, 81, 968, 645, 18, 491, 241, 228, 502, 709, 996, 94, 933, 605, 789, 54, 947, 942, 788, 821, 181,
         257, 565, 642, 755, 701, 793, 149, 52, 892, 957, 769, 97, 725, 416, 235, 641, 312, 362, 792, 694, 59, 185, 713,
         890, 401, 930, 529, 47, 159, 324, 728, 97, 317, 895, 529, 529, 250, 452, 889, 241, 510, 352, 554, 604, 595,
         134, 597, 471, 578, 299, 341, 308, 534, 112, 933, 27, 279, 126, 7, 92, 521, 891, 654, 628, 409, 887, 691, 220,
         479, 126, 153, 134, 887, 697, 87, 37, 815, 216, 298, 168, 926, 262, 779, 861, 358, 780, 556, 370, 814, 235,
         446, 19, 993, 512, 300, 681, 409, 367, 197, 710, 276, 676, 177, 300, 316, 125, 876, 803, 941, 395, 334, 745,
         155, 163, 919, 258, 349, 201, 871, 21, 60, 436, 827, 798, 682, 60, 984, 86, 292, 781, 671, 589, 752, 773, 510,
         387, 594, 473, 277, 207, 251, 222, 947, 155, 937, 952, 969, 738, 269, 755, 334, 785, 20, 829, 915, 621, 909,
         848, 947, 767, 978, 878, 140, 348, 887, 650, 226, 881, 970, 950, 943, 904, 833, 454, 323, 932, 809, 61, 745,
         197, 545, 400, 809, 548, 146, 772, 30, 768, 732, 565, 831, 173, 884, 842, 394, 384, 163, 919, 576, 497, 733,
         282, 427, 597, 987, 829, 640, 25, 286, 283, 114, 613, 604, 432, 807, 733, 325, 547, 626, 895, 58, 263, 549,
         280, 485, 884, 413, 732, 595, 408, 436, 395, 657, 206, 874, 174, 45, 226, 602, 216, 624, 512, 11, 424, 56, 760,
         937, 936, 319, 6, 190, 42, 327, 687, 116, 401, 684, 858, 92, 838, 292, 781, 682, 358, 331, 473, 99, 287, 882,
         286, 290, 885, 636, 219, 110, 893, 703, 995, 851, 454, 367, 488, 919, 925, 441, 235, 80, 477, 954, 556, 785,
         401, 619, 78, 40, 530, 147, 542, 928, 620, 52, 79, 618, 579, 410, 133, 72, 64, 810, 157, 466, 78, 195, 465,
         455, 276, 125, 540, 860, 515, 141, 659, 393, 243, 138, 924, 962, 619, 348, 2, 379, 108, 254, 140, 778, 188,
         428, 326, 41, 559, 423, 111, 48, 67, 641, 222, 74, 852, 368, 316, 983, 337, 920, 185, 357, 609, 426, 291, 976,
         826, 569, 744, 396, 285, 754, 891, 418, 475, 771, 650, 833, 209, 538, 214, 892, 599, 924, 909, 388, 949, 372,
         809, 367, 497, 653, 388, 448, 505, 368, 312, 872, 491, 767, 848, 312, 998, 734, 565, 755, 17, 639, 350, 226,
         433, 97, 823, 841, 7, 429, 193, 673, 0, 986, 25, 244, 48, 19, 289, 956, 770, 749, 975, 858, 784, 112, 62, 854,
         486, 382, 426, 327, 945, 854, 988, 774, 213, 118, 35, 552, 790, 645, 169, 931, 437, 777, 113, 681, 87, 391,
         685, 459, 572, 515, 976, 21, 73, 802, 180, 829, 986, 191, 818, 491, 699, 766, 768, 856, 546, 29, 446, 828, 851,
         616, 541, 982, 617, 466, 943, 826, 141, 207, 379, 156, 915, 412, 504, 329, 287, 430, 919, 402, 621, 375, 487,
         561, 43, 603, 717, 311, 541, 554, 931, 53, 933, 133, 690, 93, 895, 677, 89, 119, 137, 722, 60, 733, 674, 851,
         90, 491, 927, 479, 268, 701, 337, 159, 188, 712, 244, 634, 854, 9, 316, 369, 493, 410, 531, 353, 705, 335, 290,
         397, 866, 359, 923, 441, 440, 659, 376, 592, 669, 23, 813, 7, 993, 949, 853, 927, 51, 705, 438, 682, 285, 26,
         592, 434, 610, 593, 321, 669, 114, 512, 578, 342, 261, 507, 783, 483, 957, 915, 437, 911, 120, 365, 629, 32,
         488, 590, 730, 15, 238, 85, 60, 304, 365, 958, 628, 581, 649, 271, 129, 653, 663, 683, 858, 956, 975, 488, 62,
         510, 163, 479, 406, 32, 457, 322, 882, 976, 135, 248, 499, 317, 847, 379, 456, 740, 576, 756, 779, 94, 15, 847,
         999, 555, 438, 85, 912, 267, 567, 820, 187, 906, 470, 110, 892, 976, 350, 432, 835, 843, 720, 572, 575, 865,
         29, 613, 661, 208, 497, 189, 752, 876, 901, 637, 551, 124, 506, 44, 10, 279, 854, 74, 552, 361, 951, 693, 119,
         285, 509, 288, 809, 581, 436, 754, 318, 15, 848, 424, 504, 277, 115, 350, 302, 36, 294, 922, 656, 387, 376,
         491, 548, 462, 941, 686, 455, 391, 81, 702, 115, 187, 684, 299, 743, 61, 802, 627, 839, 545, 80, 505, 184, 1,
         546, 753, 687, 48, 335, 706, 692, 271, 567, 616, 381, 332, 129, 721, 246, 230, 180, 202, 793, 337, 486, 940,
         452, 623, 595, 777, 748, 666, 281, 509, 296, 218, 90, 798, 946, 231, 779, 770, 909, 409, 95, 514, 486, 721, 24,
         870, 527, 605, 247, 687, 115, 718, 233, 545, 866, 441, 998, 299, 305, 146, 898, 82, 569, 761, 5, 380, 336, 402,
         820, 223, 303, 613, 474, 879, 940, 718, 290, 20, 244, 860, 807, 173, 243, 531, 365, 777, 19, 859, 115, 906,
         463, 97, 82, 738, 342, 768, 374, 115, 66, 620, 655, 140, 165, 248, 84, 849, 463, 531, 686, 388, 963, 936, 117,
         749, 873, 145, 565, 61, 950, 468, 159, 908, 102, 765, 346, 378, 947, 65, 367, 438, 444, 488, 663, 199, 324,
         164, 855, 93, 521, 978, 142, 938, 67, 242, 972, 486, 276, 894, 471, 383, 561, 193, 826, 204, 612, 580, 600,
         641, 287, 539, 464, 549, 54, 86, 457, 606, 779, 458, 787, 877, 63, 110, 699, 245, 66, 645, 415, 529, 496, 391,
         672, 197, 221, 340, 386, 642, 934, 838, 535, 52, 978, 765, 122, 770, 389, 623, 583, 321, 887, 302, 265, 64,
         634, 504, 654, 463, 202, 639, 988, 653, 276, 879, 940, 382, 39, 852, 618, 389, 347, 105, 570, 38, 838, 741,
         775, 436, 774, 752, 274, 454, 270, 521, 936, 796, 520, 317, 694, 552, 686, 945, 487, 42, 918, 903, 888, 300,
         851, 739, 610, 716, 1, 95, 305, 890, 447, 925, 235, 799, 516, 945, 944, 79, 9, 702, 580, 547, 538, 639, 138,
         232, 362, 53, 403, 637, 713, 615, 662, 929, 715, 404, 845, 607, 32, 414, 943, 762, 978, 432, 295, 379, 704,
         525, 549, 770, 903, 695, 631, 430, 550, 235, 413, 806, 431, 46, 80, 164, 984, 548, 800, 293, 427, 278, 665,
         841, 129, 232, 712, 423, 192, 223, 722, 623, 830, 738, 70, 511, 367, 778, 730, 901, 49, 503, 472, 512, 959,
         200, 371, 799, 615, 628, 59, 738, 280, 198, 516, 689, 132, 500, 3, 10, 987, 696, 114, 859, 193, 727, 751, 927,
         86, 285, 781, 288, 192, 387, 791, 302, 75, 953, 830, 635, 640, 24, 215, 158, 863, 346, 189, 943, 923, 143, 284,
         232, 846, 70, 960, 975, 482, 876, 982, 853, 839, 430, 817, 125, 222, 32, 308, 959, 564, 516, 175, 415, 159,
         217, 320, 685, 747, 825, 607, 765, 389, 564, 175, 107, 849, 198, 83, 901, 78, 801, 174, 150, 871, 502, 553,
         931, 826, 499, 699, 100, 77, 773, 142, 220, 560, 153, 282, 323, 776, 515, 731, 33, 234, 598, 661, 80, 671, 888,
         809, 253, 133, 648, 771, 991, 123, 890, 228, 959, 551, 179, 340, 726, 696, 680, 613, 549, 587, 334, 613, 243,
         806, 25, 93, 657, 22, 416, 357, 628, 44, 407, 961, 442, 923, 839, 662, 581, 768, 69, 331, 589, 83, 189, 159,
         813, 855, 683, 993, 205, 630, 646, 251, 386, 922, 550, 499, 289, 853, 994, 298, 444, 599, 917, 427, 76, 987,
         793, 617, 510, 484, 192, 724, 41, 87, 4, 368, 4, 756, 983, 49, 988, 430, 638, 196, 573, 973, 16, 977, 245, 821,
         537, 280, 272, 454, 207, 507, 950, 473, 998, 795, 974, 206, 875, 359, 912, 774, 799, 866, 402, 141, 787, 451,
         593, 758, 751, 478, 900, 302, 603, 382, 888, 835, 771, 332, 227, 13, 379, 172, 828, 228, 589, 118, 720, 403,
         751, 812, 371, 775, 373, 556, 692, 725, 688, 43, 575, 485, 60, 771, 264, 793, 648, 582, 270, 101, 604, 144,
         466, 428, 727, 977, 390, 475, 158, 656, 151, 614, 774, 629, 154, 983, 574, 978, 947, 635, 678, 870, 974, 552,
         632, 190, 240, 110, 786, 67, 914, 907, 267, 933, 848, 835, 33, 418, 673, 694, 98, 730, 860, 336, 426, 252, 819,
         900, 912, 966, 431, 299, 354, 966, 251, 664, 414, 330, 283, 199, 584, 13, 436, 281, 102, 533, 333, 816, 805,
         936, 17, 815, 47, 683, 680, 558, 411, 660, 510, 929, 333, 665, 331, 648, 944, 400, 417, 63, 71, 77, 302, 619,
         580, 411, 440, 931, 451, 244, 982, 398, 709, 233, 833, 960, 789, 289, 927, 742, 584, 775, 546, 947, 373, 38,
         366, 812, 361, 554, 545, 450, 396, 523, 241, 661, 88, 513, 931, 324, 572, 886, 106, 72, 956, 283, 768, 240,
         375, 186, 198, 392, 620, 389, 969, 753, 989, 382, 533, 701, 491, 792, 842, 44, 243, 561, 752, 788, 645, 167,
         974, 922, 173, 276, 946, 243, 586, 765, 41, 187, 737, 943, 575, 302, 613, 439, 358, 618, 595, 583, 144, 261,
         616, 540, 490, 608, 812, 750, 445, 658, 127, 487, 736, 172, 863, 665, 119, 934, 390, 853, 859, 754, 971, 517,
         63, 669, 92, 943, 137, 968, 54, 243, 840, 387, 758, 572, 408, 465, 504, 141, 386, 400, 425, 930, 205, 698, 838,
         706, 772, 135, 427, 945, 77, 20, 744, 218, 336, 574, 588, 534, 9, 256, 784, 206, 380, 250, 779, 475, 846, 76,
         263, 491, 822, 628, 261, 797, 882, 73, 984, 292, 843, 757, 735, 738, 498, 726, 930, 638, 970, 280, 657, 988,
         960, 315, 390, 552, 703, 711, 181, 82, 371, 412, 419, 693, 713, 658, 317, 157, 754, 134, 221, 427, 760, 904,
         200, 452, 796, 131, 974, 686, 249, 557, 89, 84, 591, 750, 295, 987, 249, 195, 92, 583, 592, 817, 347, 125, 833,
         133, 21]
    ]

    for t in tests:
        print(t)
        print(obj.trap(t), end="\n\n")

    from random import randint
    print([randint(0,999) for _ in range(5000)])